{"version":3,"file":"job_model_mongo.schema.js","sourceRoot":"","sources":["job_model_mongo.schema.ts"],"names":[],"mappings":"AAAA,OAAO,EACH,MAAM,EACP,MAAM,UAAU,CAAA;AAEnB,OAAO,EAAC,cAAc,EAAC,MAAM,4BAA4B,CAAA;AAExD,MAAM,CAAC,IAAM,SAAS,GAAG,IAAI,MAAM,CAAC;IACjC,MAAM,EAAE;QACN,IAAI,EAAE,MAAM;KACb;IACD,UAAU,EAAE;QACV,IAAI,EAAE,MAAM;KACb;IACD,UAAU,EAAE;QACV,IAAI,EAAE,MAAM;KACb;IACD,IAAI,EAAE;QACJ,IAAI,EAAE,MAAM;KACb;IACD,GAAG,EAAE;QACH,IAAI,EAAE,MAAM,CAAC,KAAK,CAAC,KAAK;KACzB;IACD,MAAM,EAAC;QACL,IAAI,EAAE,MAAM;QACZ,OAAO,EAAC,CAAC;KACV;IACD,OAAO,EAAE;QACP,IAAI,EAAE,MAAM,CAAC,KAAK,CAAC,KAAK;KACzB;CACF,EACD;IACE,UAAU,EAAE;QACV,SAAS,EAAE,gBAAgB;QAC3B,SAAS,EAAE,gBAAgB;KAC5B;CACF,CAAC,CAAA;AAEF,6DAA6D;AAE7D,SAAS,CAAC,KAAK,CACb;IACE,QAAQ,EAAE,CAAC;CACZ,EACD;IACE,kBAAkB,EAAE,cAAc;IAClC,uBAAuB,EAAE;QACvB,MAAM,EAAE,CAAC;KACZ;CACA,CACF,CAAA","sourcesContent":["import {\n    Schema\n  } from 'mongoose'\n\nimport {COLLECTION_TTL} from './job_model_mongo.constant'\n\n export const JobSchema = new Schema({\n    org_id: {\n      type: Number\n    },\n    queue_code: {\n      type: String\n    },\n    queue_name: {\n      type: String\n    },\n    name: {\n      type: String\n    },\n    msg: {\n      type: Schema.Types.Mixed\n    },\n    status:{\n      type: Number,\n      default:0\n    },\n    err_msg: {\n      type: Schema.Types.Mixed\n    },\n  },\n  {\n    timestamps: {\n      createdAt: 'doc_created_at',\n      updatedAt: 'doc_updated_at'\n    }\n  })\n\n  // JobSchema.index({createdAt: 1},{expireAfterSeconds: 3600})\n\n  JobSchema.index(\n    {\n      'status': 1\n    },\n    {\n      expireAfterSeconds: COLLECTION_TTL,\n      partialFilterExpression: {\n        status: 2\n    }\n    }\n  )"]}